/**
 * @file blog-layout.css
 * @description 博客页面的统一布局样式
 * @author 陆凯
 * @created 2024-03-09
 * @updated 2024-03-09
 * 
 * 该文件整合了博客页面的所有布局样式，包括：
 * - 博客页面的整体布局（flex布局、间距等）
 * - 左侧栏和右侧栏的基本样式
 * - 响应式布局调整
 */

/* 博客页面主容器 */
.blog-content {
    display: flex; /* 保持flex布局 */
    flex-direction: row; /* 水平方向 */
    gap: 0; /* 完全移除间距 */
    max-width: 100%; /* 让页面横向撑满 */
    width: 100%;
    margin: 0 auto;
    padding: 0 20px 20px; /* 减小左右和底部内边距 */
    min-height: calc(100vh - 70px); /* 调整最小高度，移除footer后减少的高度更少 */
    position: relative;
    z-index: 1;
    box-sizing: border-box;
    align-items: stretch; /* 恢复为拉伸，确保栏目高度一致 */
    margin-top: 50px; /* 减小顶部外边距，更接近底部间距 */
    border-top: 1px solid rgba(0, 0, 0, 0.05); /* 添加顶部细微分隔线 */
    padding-top: 20px; /* 添加顶部内边距 */
}

/* 左侧栏样式 */
.blog-content .left-column {
    background: #ffffff;
    padding: 25px; /* 减小内边距 */
    border-radius: 12px 0 0 12px; /* 左侧圆角 */
    box-shadow: 0 3px 12px rgba(0, 0, 0, 0.08); /* 更细腻的阴影 */
    position: relative; /* 改为相对定位 */
    top: 0; /* 重置顶部距离 */
    overflow-y: auto;
    overflow-x: hidden;
    flex: 0 0 250px; /* 固定宽度 */
    width: 250px; /* 初始宽度 */
    transition: width 0.2s ease, flex 0.2s ease; /* 更快的过渡 */
    z-index: 2;
    margin-right: 0; /* 确保没有右边距 */
    min-height: 500px; /* 设置最小高度 */
    border: 1px solid rgba(0, 0, 0, 0.05); /* 添加细微边框 */
    border-right: none; /* 移除右边框，与拖动手柄衔接 */
    display: flex; /* 添加flex布局 */
    flex-direction: column; /* 垂直排列 */
}

/* 左侧栏内容容器 */
.blog-content .left-column .article-tree-container {
    flex: 1; /* 让树形列表占据剩余空间 */
    overflow-y: auto; /* 内容溢出时显示滚动条 */
    margin-top: 15px; /* 与搜索框保持一定距离 */
}

/* 搜索框区域 */
.blog-content .left-column .search-section {
    margin-bottom: 15px; /* 与下方内容保持距离 */
}

/* 调试区域 */
.blog-content .left-column .debug-section {
    margin-top: auto; /* 推到底部 */
    padding-top: 15px; /* 与上方内容保持距离 */
}

/* 仿飞书风格的拖动手柄 */
.resize-handle {
    width: 10px; /* 增加宽度，提高可点击区域 */
    cursor: col-resize;
    background-color: rgba(245, 250, 255, 0.1); /* 微弱背景色 */
    position: relative;
    z-index: 10;
    margin: 0;
    padding: 0;
    align-self: stretch; /* 确保高度拉伸 */
    height: auto; /* 高度自动 */
    display: flex;
    align-items: center;
    justify-content: center;
    transition: background-color 0.2s ease;
    box-sizing: border-box; /* 确保宽度计算包含边框 */
}

/* 拖动手柄的分隔线 */
.separator-line {
    position: absolute;
    width: 2px; /* 稍增加宽度 */
    height: 100%; /* 确保占满全高 */
    background-color: #e8eef5; /* 更淡的灰蓝色 */
    left: 50%;
    transform: translateX(-50%);
    transition: width 0.2s ease, background-color 0.2s ease;
    opacity: 0.6; /* 降低默认不透明度 */
    pointer-events: none; /* 确保不干扰鼠标事件 */
}

/* 拖动手柄悬停效果 */
.resize-handle:hover {
    background-color: rgba(207, 232, 252, 0.3); /* 稍增加背景色 */
}

.resize-handle:hover .separator-line {
    width: 3px;
    background-color: #90b3ff; /* 更淡的蓝色 */
    opacity: 0.8;
}

/* 拖动状态 */
.resize-handle.active {
    background-color: rgba(207, 232, 252, 0.5); /* 明显的背景色 */
}

.resize-handle.active .separator-line {
    width: 3px;
    background-color: #77a0ff; /* 更淡的活动蓝色 */
    opacity: 1;
    box-shadow: 0 0 4px rgba(119, 160, 255, 0.5); /* 更新阴影颜色 */
}

/* 右侧栏样式 */
.blog-content .right-column {
    background: #ffffff;
    padding: 25px 35px; /* 减小内边距 */
    border-radius: 0 12px 12px 0; /* 右侧圆角 */
    box-shadow: 0 3px 12px rgba(0, 0, 0, 0.08); /* 更细腻的阴影 */
    flex: 1; /* 填充剩余空间 */
    min-width: 0; /* 允许收缩 */
    z-index: 1;
    margin-left: 0; /* 确保没有左边距 */
    position: relative; /* 改为相对定位 */
    top: 0; /* 重置顶部距离 */
    min-height: 500px; /* 设置最小高度 */
    border: 1px solid rgba(0, 0, 0, 0.05); /* 添加细微边框 */
    border-left: none; /* 移除左边框，与拖动手柄衔接 */
    display: flex; /* 添加flex布局 */
    flex-direction: column; /* 垂直排列 */
}

/* 右侧栏文章容器 */
.blog-content .right-column #article-container {
    flex: 1; /* 占据所有可用空间 */
    overflow-y: auto; /* 内容溢出时显示滚动条 */
    min-height: 450px; /* 确保最小高度 */
}

/* 文章标题 */
.blog-content .right-column .article-title {
    margin-top: 0; /* 移除顶部边距 */
    margin-bottom: 20px; /* 与内容保持距离 */
    font-size: 28px; /* 增大标题字体 */
    font-weight: 600; /* 较粗的字重 */
    color: #333; /* 深色字体 */
}

/* 主题分类标签 */
.blog-content .right-column .category-tags {
    display: flex;
    flex-wrap: wrap;
    gap: 8px;
    margin: 20px 0;
}

.blog-content .right-column .category-tag {
    padding: 5px 12px;
    border-radius: 16px;
    font-size: 13px;
    font-weight: 500;
    cursor: pointer;
    transition: background-color 0.2s ease;
}

/* 文章内容区域 - 新增，提高可读性 */
.article-body {
    max-width: 1200px; /* 限制内容最大宽度，保持可读性 */
    margin: 0 auto;
    line-height: 1.8;
    color: #444;
    font-size: 16px;
}

.article-body p {
    margin-bottom: 16px;
}

.article-body h1, 
.article-body h2, 
.article-body h3 {
    margin-top: 32px;
    margin-bottom: 16px;
    font-weight: 600;
    color: #333;
}

.article-body h1 {
    font-size: 24px;
    border-bottom: 1px solid #eee;
    padding-bottom: 8px;
}

.article-body h2 {
    font-size: 20px;
}

.article-body h3 {
    font-size: 18px;
}

.article-body ul, 
.article-body ol {
    padding-left: 20px;
    margin-bottom: 16px;
}

.article-body li {
    margin-bottom: 8px;
}

.article-body code {
    background-color: #f8f9fa;
    border-radius: 3px;
    padding: 2px 5px;
    font-family: 'SFMono-Regular', Consolas, 'Liberation Mono', Menlo, monospace;
}

.article-body pre {
    background-color: #f8f9fa;
    border-radius: 6px;
    padding: 16px;
    overflow-x: auto;
    margin-bottom: 16px;
}

.article-body pre code {
    background: none;
    padding: 0;
}

.article-body blockquote {
    border-left: 4px solid #ddd;
    padding: 0 16px;
    color: #666;
    margin: 0 0 16px;
}

/* 响应式布局 - 中等屏幕 */
@media (max-width: 1200px) {
    .blog-content {
        padding: 15px 15px 15px; /* 调整内边距，包括顶部 */
        gap: 0; /* 保持无间距 */
        margin-top: 45px; /* 调整顶部间距 */
        border-top: 1px solid rgba(0, 0, 0, 0.05); /* 保持顶部分隔线 */
    }
    
    .blog-content .left-column {
        padding: 20px; /* 减小内边距 */
        flex-basis: 220px; /* 稍微减小基础宽度 */
        max-width: 35%; /* 允许更大的最大宽度比例 */
        min-height: 450px; /* 稍微减小最小高度 */
    }
    
    .blog-content .right-column {
        padding: 20px 25px; /* 减小内边距 */
        min-height: 450px; /* 稍微减小最小高度 */
    }
}

/* 响应式布局 - 小屏幕 */
@media (max-width: 768px) {
    .blog-content {
        flex-direction: column; /* 小屏幕改为垂直布局 */
        padding: 12px 10px 10px; /* 调整内边距，包括顶部 */
        gap: 15px; /* 垂直间距 */
        margin-top: 40px; /* 调整顶部间距 */
        border-top: 1px solid rgba(0, 0, 0, 0.05); /* 保持顶部分隔线 */
    }
    
    .blog-content .left-column {
        position: relative; /* 保持相对定位 */
        top: 0;
        max-height: none;
        padding: 15px; /* 减小内边距 */
        flex: none !important;
        width: 100% !important; /* 强制宽度100% */
        max-width: none; /* 移除最大宽度限制 */
        border-radius: 12px; /* 恢复完整圆角 */
        margin-bottom: 15px;
        transition: none; /* 禁用过渡效果 */
        border: 1px solid rgba(0, 0, 0, 0.05); /* 恢复完整边框 */
        min-height: 350px; /* 减小最小高度 */
    }
    
    .blog-content .right-column {
        padding: 15px 20px; /* 减小内边距 */
        width: 100%; /* 确保宽度100% */
        border-radius: 12px; /* 恢复完整圆角 */
        border: 1px solid rgba(0, 0, 0, 0.05); /* 恢复完整边框 */
        min-height: 400px; /* 减小最小高度 */
    }
    
    .resize-handle {
        display: none !important; /* 在小屏设备上隐藏调整手柄 */
    }

    .separator-line {
        display: none !important; /* 在小屏设备上隐藏分隔线 */
    }
    
    /* 调整小屏幕下的内容容器 */
    .blog-content .left-column .article-tree-container,
    .blog-content .right-column #article-container {
        min-height: 300px; /* 减小最小高度 */
    }
}

/* 树形列表样式优化 */
.article-tree-container #article-tree {
    padding-left: 0;
    margin: 0;
    list-style: none;
}

.article-tree-container .tree-item {
    margin-bottom: 5px;
}

.article-tree-container .tree-item-content {
    display: flex;
    align-items: center;
    padding: 8px 10px;
    border-radius: 6px;
    cursor: pointer;
    transition: background-color 0.2s ease;
}

.article-tree-container .tree-item-content:hover {
    background-color: rgba(242, 246, 252, 0.8);
}

.article-tree-container .tree-item.active > .tree-item-content {
    background-color: rgba(230, 240, 255, 0.8);
    color: #3370ff;
}

.article-tree-container .tree-toggle {
    margin-right: 8px;
    transition: transform 0.2s ease;
}

.article-tree-container .tree-item.expanded > .tree-item-content .tree-toggle {
    transform: rotate(90deg);
}

.article-tree-container .item-name {
    flex: 1;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
}

.article-tree-container .item-count {
    font-size: 14px;
    color: #666;
    margin-left: 6px;
    font-weight: 500;
}

.article-tree-container .tree-children {
    padding-left: 18px;
    list-style: none;
    max-height: 0;
    overflow: hidden;
    transition: max-height 0.3s ease;
}

.article-tree-container .tree-item.expanded > .tree-children {
    max-height: 1000px;
}

/* 搜索框样式优化 */
.search-box {
    position: relative;
    margin-bottom: 5px;
}

.search-box input {
    width: 100%;
    padding: 8px 30px 8px 12px;
    border: 1px solid #ddd;
    border-radius: 6px;
    font-size: 14px;
    transition: all 0.2s ease;
}

.search-box input:focus {
    border-color: #3370ff;
    outline: none;
    box-shadow: 0 0 0 2px rgba(51, 112, 255, 0.2);
}

.search-box .search-clear {
    position: absolute;
    right: 8px;
    top: 50%;
    transform: translateY(-50%);
    background: none;
    border: none;
    color: #999;
    cursor: pointer;
    display: none;
    padding: 0;
    font-size: 14px;
}

.search-box input:not(:placeholder-shown) + .search-clear {
    display: block;
} 